aws ecs register-task-definition --family devops-pipeline-task --network-mode awsvpc --requires-compatibilities FARGATE --cpu 256 --memory 512 --execution-role-arn "arn:aws:iam::070593201734:role/ecsTaskExecutionRole" --container-definitions '[{"name":"devops-pipeline-app","image":"070593201734.dkr.ecr.eu-north-1.amazonaws.com/devops-pipeline:latest","portMappings":[{"containerPort":5000,"protocol":"tcp"}],"environment":[{"name":"ENVIRONMENT","value":"production"}],"logConfiguration":{"logDriver":"awslogs","options":{"awslogs-group":"/ecs/devops-pipeline","awslogs-region":"eu-north-1","awslogs-stream-prefix":"ecs"}},"essential":true}]' --region eu-north-1

aws ecs update-service --cluster devops-pipeline-cluster --service devops-pipeline-service --task-definition devops-pipeline-task --force-new-deployment --region eu-north-1
